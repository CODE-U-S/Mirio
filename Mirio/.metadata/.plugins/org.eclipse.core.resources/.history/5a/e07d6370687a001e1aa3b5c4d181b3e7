import java.awt.BorderLayout;
import java.awt.Graphics;
import java.awt.event.KeyEvent;
import java.awt.event.KeyListener;
import java.awt.image.BufferedImage;
import java.io.File;
import java.io.IOException;

import javax.imageio.ImageIO;
import javax.swing.JPanel;

//TODO
//1. 아이템 밑으로 떨어지게 만들기
//2. 아이템 캐릭터와 닿으면 사라지게 만들기
//3. 스레드로 시간바 만들기
//4. 시험 화면으로 전환
//5. 이미지 삽입
//6. test지 위로 올라가게 움직이기
//7. test지 일정 위치에서 멈추게 만들기.
//8. 결과 화면으로 전환

public class StudyPanel extends JPanel{
    private BufferedImage image; // 이미지를 저장할 변수
    private BufferedImage character_image;
    
    private BufferedImage food_cake;
    private BufferedImage food_pang;
    private BufferedImage food_egg;
    
    private BufferedImage good_english;
    private BufferedImage good_jsp;
    private BufferedImage good_cpp;
    private BufferedImage good_luck;
    
    private BufferedImage bad_card;
    private BufferedImage bad_chip;
    
    private BufferedImage[] item;
    private static int randoms[] = new int[9];

    private int y = 550;
    private static int x = 60;
    
    static {
    	for (int i = 0; i < 9; i++) {
            int random = (int) (Math.random() * (1000 - x)) + x;// 60부터 940까지의 랜덤한 숫자 생성

            // 배열에 중복된 숫자가 있는지 확인
            boolean isDuplicate = false;
            for (int j = 0; j < i; j++) {
                if (randoms[j] == random) {
                    isDuplicate = true;
                    break;
                }
            }

            // 중복된 숫자가 없으면 배열에 추가, 있으면 현재 인덱스(i)를 감소시켜 다시 생성
            if (!isDuplicate) {
                randoms[i] = random;
            } else {
                i--;
            }
        }

        // 중복되지 않은 9개의 랜덤한 숫자가 uniqueNumbers 배열에 저장됨
        for(int i = 0; i < 9; i++) {
        	System.out.println("중복되지 않은 랜덤한 숫자: " + randoms[i]);
        	
        }
    }
 
    // 이미지 파일 로드
    public StudyPanel() {
    	// 화면 전환
    	setLayout(new BorderLayout());
    	
        try {
            // 이미지 파일을 로드합니다. 이미지 파일은 images 폴더에 있어야 합니다.
            image = ImageIO.read(new File("images/MirioClassLearnBackground.png"));
            character_image = ImageIO.read(new File("images/character02.png"));
            item = new BufferedImage[] {
                    ImageIO.read(new File("images/cake.png")),
                    ImageIO.read(new File("images/pang.png")),
                    ImageIO.read(new File("images/egg.png")),
                    ImageIO.read(new File("images/english.png")),
                    ImageIO.read(new File("images/jsp.png")),
                    ImageIO.read(new File("images/cpp.png")),
                    ImageIO.read(new File("images/luck.png")),
                    ImageIO.read(new File("images/card.png")),
                    ImageIO.read(new File("images/chip.png"))
            };
        } catch (IOException e) {
            e.printStackTrace();
        }
    }

    public void keyPressed(KeyEvent e) {
        int keyCode = e.getKeyCode();
        // 왼쪽 화살표 키를 눌렀을 때 이미지의 x 좌표를 감소시켜 왼쪽으로 이동
        if (keyCode == KeyEvent.VK_LEFT) {
            x -= 10;
        }
        // 오른쪽 화살표 키를 눌렀을 때 이미지의 x 좌표를 증가시켜 오른쪽으로 이동
        else if (keyCode == KeyEvent.VK_RIGHT) {
            x += 10;
        }
        repaint(); // 이미지의 위치가 변경되었으므로 화면을 다시 그리도록 요청
    }
    @Override
    protected void paintComponent(Graphics g) {
        super.paintComponent(g);
        if (image != null) g.drawImage(image, 0, 0, 1200, 700, this);// 이미지를 패널에 그립니다.
        if (character_image != null) g.drawImage(character_image, x, y, this);
        for(int i = 0; i < 9; i++) {
        	if(item[i] != null) {
        		g.drawImage(item[i], randoms[i], 0, this);
        		System.out.println(randoms[i]);
        	}
        }
    }
}